<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Milk Depot Recipes</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="appContainer">

        <header id="appHeader">
            <h1>Milk Depot Recipes</h1>
            <p class="tagline">Fresh, Filtered, Fantastic Milk - Made by You!</p>
        </header>

        <main>
            <!-- Screen 1: Recipe List -->
            <div id="recipeListScreen">
                <h2>Choose Your Milk Adventure!</h2>
                <div class="list-container">
                    <ul id="recipeList">
                        <!-- Recipe names loaded by JavaScript -->
                        <li class="loading-placeholder">Loading recipes...</li>
                    </ul>
                </div>
            </div>

            <!-- Screen 2: Recipe Details -->
            <div id="recipeDetailScreen" class="hidden">
                <button id="homeButton">← Back to Recipes</button>
                <h2 id="recipeName">Recipe Name</h2>

                <div class="recipe-section">
                    <h3>What You'll Need (for the Filter Basket)</h3>
                    <h4>Step 1: Base Ingredients</h4>
                    <ul id="recipeIngredients"></ul>
                    <h4>Step 2: Flavor Boosters</h4>
                    <p>Add the following to the filter basket (adjust to taste):</p>
                    <ul id="recipeFlavorings"></ul>
                </div>

                <div class="recipe-section">
                    <h3>How to Make It (Using Your Milk Depot!)</h3>
                    <ol id="recipeSteps" start="3">
                        <li>Attach the filter basket securely to the milk maker top.</li>
                        <li>Fill the pitcher with 1300ml (about 5.5 cups) fresh water and place the milk maker top onto the pitcher.</li>
                        <li>Press the 'Start' button. Go grab a glass!</li>
                        <li>In about a minute, your fresh, automatically filtered milk is ready! Pour, enjoy immediately, or chill for later (usually lasts 3-5 days).</li>
                    </ol>
                </div>

                 <div class="recipe-section">
                    <h3>Why You'll Love It</h3>
                    <p id="recipeDescription"></p>
                </div>


                <div class="recipe-section">
                    <h3>Nutrition Estimate* (Per 1 cup / 240ml Serving)</h3>
                    <table id="nutritionTable">
                        <thead>
                            <tr>
                                <th>Nutrient</th>
                                <th>Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Nutrition data loaded by JavaScript -->
                        </tbody>
                    </table>
                    <p class="disclaimer">
                        *<strong>Disclaimer:</strong> Nutrition information is an estimate based on the raw ingredients listed for Step 1 & 2 before blending and dilution. Actual values in the final milk will vary based on specific ingredients, appliance efficiency, and potential settling. This table is for informational purposes only.
                    </p>
                </div>

            </div>
        </main>

         <footer id="appFooter">
            <p>© Milk Depot - Make Milk Magic!</p>
        </footer>

    </div>

    <script src="recipes.js"></script> {/* Data file FIRST */}
    <script src="app.js"></script>     {/* Logic file SECOND */}

    {/* *** FIX: Modify inline script to PASS recipes data *** */}
    <script>
        // Ensure this runs after the DOM is interactive and scripts are likely loaded
        // Using a small delay can sometimes help in tricky loading scenarios
        setTimeout(() => {
            // Check if the recipes variable from recipes.js exists AND the init function exists
            if (typeof recipes !== 'undefined' && Array.isArray(recipes) && typeof initializeApp === 'function') {
                 console.log("Found recipes data and initializeApp function. Starting app...");
                 initializeApp(recipes); // <<< PASS the recipes array as an argument
            } else {
                console.error("Initialization failed: Recipes data or initializeApp function not found.");
                const listElement = document.getElementById('recipeList');
                if(listElement) {
                    listElement.innerHTML = '<li class="loading-placeholder">Error initializing the app. Please check console.</li>';
                }
            }
        }, 0); // setTimeout 0 helps push execution to after current script block processing
    </script>
    {/* *** END FIX *** */}

</body>
</html>
